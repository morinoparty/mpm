# ğŸ“‹ metadata/*.yaml - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«

## æ¦‚è¦

`plugins/mpm/metadata/*.yaml`ã¯ã€å€‹åˆ¥ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è©³ç´°æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
å„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è‡ªä½“ã®æƒ…å ±ã¨MPMã«ã‚ˆã‚‹ç®¡ç†æƒ…å ±ã®ä¸¡æ–¹ãŒè¨˜éŒ²ã•ã‚Œã¾ã™ã€‚

:::info è‡ªå‹•ç”Ÿæˆã¨ç®¡ç†
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯`mpm install`ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã£ã¦è‡ªå‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ã€‚
ä¸€éƒ¨ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯æ‰‹å‹•ã§ç·¨é›†ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€åŸºæœ¬çš„ã«ã¯è‡ªå‹•ç®¡ç†ã•ã‚Œã¾ã™ã€‚
:::

## ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®

```
your-server/
â”œâ”€â”€ plugins/
â”‚   â”œâ”€â”€ LuckPerms-Bukkit-5.4.102.jar
â”‚   â”œâ”€â”€ Vault.jar
â”‚   â””â”€â”€ mpm/
â”‚       â”œâ”€â”€ mpm.json
â”‚       â”œâ”€â”€ mpm-lock.yaml
â”‚       â”œâ”€â”€ repository/
â”‚       â””â”€â”€ metadata/
â”‚           â”œâ”€â”€ LuckPerms.yaml     â† ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã”ã¨ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚           â”œâ”€â”€ Vault.yaml          â† ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã”ã¨ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚           â””â”€â”€ EssentialsX.yaml   â† ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã”ã¨ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â””â”€â”€ ...
```

## åŸºæœ¬æ§‹é€ 

```yaml title="plugins/mpm/metadata/LuckPerms.yaml"
# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŸºæœ¬æƒ…å ±ï¼ˆplugin.ymlã¾ãŸã¯paper-plugin.ymlã‹ã‚‰æŠ½å‡ºï¼‰
pluginInfo:
  name: "LuckPerms"
  version: "5.4.102"
  main: "me.lucko.luckperms.bukkit.LuckPermsBukkitPlugin"
  description: "A permissions plugin for Minecraft servers"
  apiVersion: "1.13"
  author: "Luck"
  website: "https://luckperms.net"

# MPMã«ã‚ˆã‚‹ç®¡ç†æƒ…å ±
mpmInfo:
  repository:
    type: github
    id: LuckPerms/LuckPerms

  version:
    current:
      raw: "v5.4.102"
      normalized: "5.4.102"
    latest:
      raw: "v5.4.102"
      normalized: "5.4.102"
    lastChecked: "2025-01-15T10:30:00Z"

  download:
    url: "https://github.com/LuckPerms/LuckPerms/releases/download/v5.4.102/LuckPerms-Bukkit-5.4.102.jar"
    downloadId: "v5.4.102"
    fileName: "LuckPerms-Bukkit-5.4.102.jar"
    sha256: "abc123def456..."

  settings:
    lock: false
    autoUpdate: false

  history:
    - version: "5.4.102"
      installedAt: "2025-01-15T10:30:00Z"
      action: "install"
```

## ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´°

### pluginInfo

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³JARãƒ•ã‚¡ã‚¤ãƒ«ã®`plugin.yml`ã¾ãŸã¯`paper-plugin.yml`ã‹ã‚‰æŠ½å‡ºã•ã‚ŒãŸæƒ…å ±ã§ã™ã€‚

:::note Bukkitãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã®é•ã„
Bukkitãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å ´åˆã¯`BukkitPluginData`ã€Paperãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å ´åˆã¯`PaperPluginData`ã¨ã—ã¦è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚
:::

#### Bukkitãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å ´åˆ

```yaml
pluginInfo:
  name: "Vault"
  version: "1.7.3"
  main: "net.milkbowl.vault.Vault"
  description: "Vault is a Permissions & Economy API"
  apiVersion: "1.13"
  author: "Sleaker"
  website: "https://www.spigotmc.org/resources/vault.34315/"
```

#### Paperãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å ´åˆ

```yaml
pluginInfo:
  name: "ModernPlugin"
  version: "1.0.0"
  main: "com.example.ModernPlugin"
  description: "A modern Paper plugin"
  apiVersion: "1.20"
  bootstrapper: "com.example.ModernPluginBootstrap"
  loader: "com.example.ModernPluginLoader"
  author: "ExampleAuthor"
  website: "https://example.com"
```

### mpmInfo

MPMã«ã‚ˆã‚‹ç®¡ç†æƒ…å ±ã§ã™ã€‚

#### repository

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å–å¾—å…ƒãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±ã§ã™ã€‚
`mpm.json`ã®`repository`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨åŒã˜å½¢å¼ã§ã™ã€‚

```yaml
mpmInfo:
  repository:
    type: github
    id: LuckPerms/LuckPerms
```

#### version

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†æƒ…å ±ã§ã™ã€‚

##### current

ç¾åœ¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã§ã™ã€‚

```yaml
version:
  current:
    raw: "v5.4.102"          # ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å–å¾—ã—ãŸç”Ÿã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
    normalized: "5.4.102"     # æ­£è¦åŒ–ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³
```

##### latest

æœ€å¾Œã«ãƒã‚§ãƒƒã‚¯ã—ãŸæ™‚ç‚¹ã§ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã§ã™ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰ã€‚

```yaml
version:
  latest:
    raw: "v5.4.103"
    normalized: "5.4.103"
```

##### lastChecked

æœ€å¾Œã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã£ãŸæ—¥æ™‚ï¼ˆISO 8601å½¢å¼ï¼‰ã§ã™ã€‚

```yaml
version:
  lastChecked: "2025-01-15T10:30:00Z"
```

#### download

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æƒ…å ±ã§ã™ã€‚`mpm-lock.yaml`ã®`download`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨åŒã˜å½¢å¼ã§ã™ã€‚

```yaml
mpmInfo:
  download:
    url: "https://github.com/LuckPerms/LuckPerms/releases/download/v5.4.102/LuckPerms-Bukkit-5.4.102.jar"
    downloadId: "v5.4.102"
    fileName: "LuckPerms-Bukkit-5.4.102.jar"
    sha256: "abc123def456..."
```

#### settings

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å›ºæœ‰ã®è¨­å®šã§ã™ã€‚`mpm.json`ã®`settings`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨åŒã˜å½¢å¼ã§ã™ã€‚

```yaml
mpmInfo:
  settings:
    lock: false          # ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ­ãƒƒã‚¯
    autoUpdate: false    # è‡ªå‹•æ›´æ–°
    downloadUrl: null    # ã‚«ã‚¹ã‚¿ãƒ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰URLï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    fileName: null       # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

#### history

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»æ›´æ–°å±¥æ­´ã§ã™ã€‚

```yaml
mpmInfo:
  history:
    - version: "5.4.102"
      installedAt: "2025-01-15T10:30:00Z"
      action: "install"
    - version: "5.4.101"
      installedAt: "2025-01-10T09:00:00Z"
      action: "update"
    - version: "5.4.100"
      installedAt: "2025-01-05T08:00:00Z"
      action: "rollback"
```

| action | èª¬æ˜ |
|--------|------|
| install | æ–°è¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
| update | ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–° |
| rollback | ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ |

## å®Œå…¨ãªä¾‹

### GitHubã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³

```yaml title="plugins/mpm/metadata/LuckPerms.yaml"
# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŸºæœ¬æƒ…å ±
pluginInfo:
  name: "LuckPerms"
  version: "5.4.102"
  main: "me.lucko.luckperms.bukkit.LuckPermsBukkitPlugin"
  description: "A permissions plugin for Minecraft servers"
  apiVersion: "1.13"
  author: "Luck"
  website: "https://luckperms.net"

# MPMã«ã‚ˆã‚‹ç®¡ç†æƒ…å ±
mpmInfo:
  # ãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±
  repository:
    type: github
    id: LuckPerms/LuckPerms

  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±
  version:
    current:
      raw: "v5.4.102"
      normalized: "5.4.102"
    latest:
      raw: "v5.4.103"
      normalized: "5.4.103"
    lastChecked: "2025-01-15T10:30:00Z"

  # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æƒ…å ±
  download:
    url: "https://github.com/LuckPerms/LuckPerms/releases/download/v5.4.102/LuckPerms-Bukkit-5.4.102.jar"
    downloadId: "v5.4.102"
    fileName: "LuckPerms-Bukkit-5.4.102.jar"
    sha256: "1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"

  # è¨­å®š
  settings:
    lock: false
    autoUpdate: false

  # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å±¥æ­´
  history:
    - version: "5.4.102"
      installedAt: "2025-01-15T10:30:00Z"
      action: "install"
```

### Spigotã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³

```yaml title="plugins/mpm/metadata/Vault.yaml"
# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŸºæœ¬æƒ…å ±
pluginInfo:
  name: "Vault"
  version: "1.7.3"
  main: "net.milkbowl.vault.Vault"
  description: "Vault is a Permissions & Economy API"
  apiVersion: "1.13"
  author: "Sleaker"
  website: "https://www.spigotmc.org/resources/vault.34315/"

# MPMã«ã‚ˆã‚‹ç®¡ç†æƒ…å ±
mpmInfo:
  # ãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±
  repository:
    type: spigot
    id: "34315"

  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±
  version:
    current:
      raw: "1.7.3"
      normalized: "1.7.3"
    latest:
      raw: "1.7.3"
      normalized: "1.7.3"
    lastChecked: "2025-01-15T10:30:00Z"

  # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æƒ…å ±
  download:
    url: "https://api.spiget.org/v2/resources/34315/versions/283178/download"
    downloadId: "283178"
    fileName: "Vault.jar"
    sha256: "abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"

  # è¨­å®š
  settings:
    lock: true  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®š
    autoUpdate: false

  # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å±¥æ­´
  history:
    - version: "1.7.3"
      installedAt: "2025-01-15T10:30:00Z"
      action: "install"
```

## 3ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®é–¢ä¿‚

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² | å¯¾è±¡ |
|---------|------|------|
| mpm.json | ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä¾å­˜é–¢ä¿‚ã‚’å®£è¨€ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ |
| mpm-lock.yaml | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜éŒ² | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ |
| metadata/*.yaml | ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è©³ç´°æƒ…å ±ã‚’ä¿å­˜ | å€‹åˆ¥ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ |

```
mpm.json
  â†“ mpm install
mpm-lock.yaml + metadata/LuckPerms.yaml
  â†“ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³JARã‹ã‚‰plugin.ymlã‚’æŠ½å‡º
metadata/LuckPerms.yaml (pluginInfoæ›´æ–°)
```

## ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒª

å½“ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã¯ã€ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

### GitHub

```yaml
mpmInfo:
  repository:
    type: github
    id: owner/repository  # owner/repo å½¢å¼
```

### Spigot

```yaml
mpmInfo:
  repository:
    type: spigot
    id: "34315"  # ãƒªã‚½ãƒ¼ã‚¹ID
```

### Modrinth

```yaml
mpmInfo:
  repository:
    type: modrinth
    id: plasmo-voice  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID
```

### Hangar

```yaml
mpmInfo:
  repository:
    type: hangar
    id: Plan  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID
```

### Jenkins

```yaml
mpmInfo:
  repository:
    type: jenkins
    id: https://ci.example.com/job/custom-plugin  # ã‚¸ãƒ§ãƒ–URL
```

### Local

```yaml
mpmInfo:
  repository:
    type: local
    id: /path/to/plugin.jar  # ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
```

## é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

- [mpm.json](/format/mpm-config) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- [mpm-lock.yaml](/format/mpm-lock) - ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«
