# ğŸ”’ mpm-lock.yaml - ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«

## æ¦‚è¦

`mpm-lock.yaml`ã¯ã€MinecraftPluginManagerã®ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
npmã®`package-lock.json`ã«ç›¸å½“ã—ã€å®Ÿéš›ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æƒ…å ±ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

:::warning è‡ªå‹•ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯`mpm install`ã‚„`mpm add`ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã£ã¦è‡ªå‹•çš„ã«ç”Ÿæˆãƒ»æ›´æ–°ã•ã‚Œã¾ã™ã€‚
æ‰‹å‹•ã§ç·¨é›†ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
:::

## ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®

```
your-server/
â”œâ”€â”€ mpm.json          â† ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ mpm-lock.yaml     â† ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”œâ”€â”€ plugins/
â”‚   â””â”€â”€ mpm/
â”‚       â””â”€â”€ metadata/ â† å€‹åˆ¥ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è©³ç´°æƒ…å ±
â””â”€â”€ ...
```

## åŸºæœ¬æ§‹é€ 

```yaml title="mpm-lock.yaml"
# ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
lockfileVersion: "1.0"

# ç”Ÿæˆæ—¥æ™‚ï¼ˆISO 8601å½¢å¼ï¼‰
generatedAt: "2025-01-15T10:30:00Z"

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³
plugins:
  LuckPerms:
    version:
      raw: "v5.4.102"
      normalized: "5.4.102"
    download:
      url: "https://github.com/LuckPerms/LuckPerms/releases/download/v5.4.102/LuckPerms-Bukkit-5.4.102.jar"
      downloadId: "v5.4.102"
      fileName: "LuckPerms-Bukkit-5.4.102.jar"
      sha256: "abc123def456..."
    repository:
      type: github
      id: LuckPerms/LuckPerms
    installedAt: "2025-01-15T10:30:00Z"

  Vault:
    version:
      raw: "1.7.3"
      normalized: "1.7.3"
    download:
      url: "https://api.spiget.org/v2/resources/34315/versions/283178/download"
      downloadId: "283178"
      fileName: "Vault.jar"
      sha256: "def456ghi789..."
    repository:
      type: spigot
      id: "34315"
    installedAt: "2025-01-15T10:30:00Z"
```

## ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´°

### lockfileVersion

ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ã—ã¾ã™ã€‚å°†æ¥çš„ãªäº’æ›æ€§ã®ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```yaml
lockfileVersion: "1.0"
```

### generatedAt

ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚ŒãŸæ—¥æ™‚ã‚’ISO 8601å½¢å¼ã§è¨˜éŒ²ã—ã¾ã™ã€‚

```yaml
generatedAt: "2025-01-15T10:30:00Z"
```

### plugins

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸå„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è©³ç´°æƒ…å ±ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

#### version

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

##### raw

ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å–å¾—ã—ãŸç”Ÿã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ã§ã™ã€‚
ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ˆã£ã¦å½¢å¼ãŒç•°ãªã‚Šã¾ã™ã€‚

```yaml
version:
  raw: "v5.4.102"  # GitHub: vãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä»˜ã
  # ã¾ãŸã¯
  raw: "1.0.0"     # Spigot: ãƒ—ãƒ¬ãƒ¼ãƒ³ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³
  # ã¾ãŸã¯
  raw: "release-2.0"  # ç‹¬è‡ªã®å‘½åè¦å‰‡
```

##### normalized

æ­£è¦åŒ–ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ã§ã™ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”è¼ƒã‚„ã‚½ãƒ¼ãƒˆã«ä½¿ç”¨ã§ãã‚‹å½¢å¼ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚

```yaml
version:
  raw: "v5.4.102"
  normalized: "5.4.102"  # vãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’é™¤å»
```

#### download

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æƒ…å ±ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

##### url

å®Ÿéš›ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸURLã§ã™ã€‚

```yaml
download:
  url: "https://github.com/LuckPerms/LuckPerms/releases/download/v5.4.102/LuckPerms-Bukkit-5.4.102.jar"
```

##### downloadId

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«ä½¿ç”¨ã—ãŸIDã§ã™ã€‚ãƒªãƒã‚¸ãƒˆãƒªå›ºæœ‰ã®è­˜åˆ¥å­ãŒè¨˜éŒ²ã•ã‚Œã¾ã™ã€‚

| ãƒªãƒã‚¸ãƒˆãƒª | downloadId ã®ä¾‹ | èª¬æ˜ |
|----------|----------------|------|
| GitHub   | `v5.4.102` ã¾ãŸã¯ `123456` | ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚°ã¾ãŸã¯ã‚¢ã‚»ãƒƒãƒˆID |
| Spigot   | `283178` | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ID |
| Modrinth | `abc123` | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ID |
| Hangar   | `xyz789` | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ID |

```yaml
download:
  downloadId: "v5.4.102"
```

##### fileName

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«åã§ã™ã€‚

```yaml
download:
  fileName: "LuckPerms-Bukkit-5.4.102.jar"
```

##### sha256

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®SHA-256ãƒãƒƒã‚·ãƒ¥å€¤ã§ã™ã€‚
ãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```yaml
download:
  sha256: "abc123def456789..."
```

#### repository

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å–å¾—å…ƒãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±ã§ã™ã€‚
`mpm.json`ã®`repository`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨åŒã˜å½¢å¼ã§ã™ã€‚

```yaml
repository:
  type: github
  id: LuckPerms/LuckPerms
```

#### installedAt

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸæ—¥æ™‚ã‚’ISO 8601å½¢å¼ã§è¨˜éŒ²ã—ã¾ã™ã€‚

```yaml
installedAt: "2025-01-15T10:30:00Z"
```

## å®Œå…¨ãªä¾‹

```yaml title="mpm-lock.yaml"
# ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
lockfileVersion: "1.0"

# ç”Ÿæˆæ—¥æ™‚
generatedAt: "2025-01-15T10:30:00Z"

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³
plugins:
  # GitHub ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  LuckPerms:
    version:
      raw: "v5.4.102"
      normalized: "5.4.102"
    download:
      url: "https://github.com/LuckPerms/LuckPerms/releases/download/v5.4.102/LuckPerms-Bukkit-5.4.102.jar"
      downloadId: "v5.4.102"
      fileName: "LuckPerms-Bukkit-5.4.102.jar"
      sha256: "1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
    repository:
      type: github
      id: LuckPerms/LuckPerms
    installedAt: "2025-01-15T10:30:00Z"

  # Spigot ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  Vault:
    version:
      raw: "1.7.3"
      normalized: "1.7.3"
    download:
      url: "https://api.spiget.org/v2/resources/34315/versions/283178/download"
      downloadId: "283178"
      fileName: "Vault.jar"
      sha256: "abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
    repository:
      type: spigot
      id: "34315"
    installedAt: "2025-01-15T10:30:00Z"

  # Modrinth ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  VoiceChat:
    version:
      raw: "2.5.0"
      normalized: "2.5.0"
    download:
      url: "https://cdn.modrinth.com/data/plasmo-voice/versions/abc123/plasmo-voice-2.5.0.jar"
      downloadId: "abc123"
      fileName: "plasmo-voice-2.5.0.jar"
      sha256: "fedcba0987654321fedcba0987654321fedcba0987654321fedcba0987654321"
    repository:
      type: modrinth
      id: plasmo-voice
    installedAt: "2025-01-15T10:32:00Z"

  # GitHub (EssentialsX)
  EssentialsX:
    version:
      raw: "2.20.1"
      normalized: "2.20.1"
    download:
      url: "https://github.com/EssentialsX/Essentials/releases/download/2.20.1/EssentialsX-2.20.1.jar"
      downloadId: "2.20.1"
      fileName: "EssentialsX-2.20.1.jar"
      sha256: "0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef"
    repository:
      type: github
      id: EssentialsX/Essentials
    installedAt: "2025-01-15T10:35:00Z"
```

## ç”¨é€”

### å†ç¾å¯èƒ½ãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

`mpm-lock.yaml`ãŒã‚ã‚‹ã“ã¨ã§ã€åˆ¥ã®ç’°å¢ƒã§å…¨ãåŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

```bash
# ä»–ã®ç’°å¢ƒã§åŒã˜ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
mpm install
```

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å›ºå®š

`mpm.json`ã§`version: latest`ã‚’æŒ‡å®šã—ã¦ã„ã‚‹å ´åˆã§ã‚‚ã€`mpm-lock.yaml`ã«è¨˜éŒ²ã•ã‚ŒãŸ
æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

æ˜ç¤ºçš„ã«æ›´æ–°ã™ã‚‹å ´åˆã¯ã€`mpm update`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
# æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æ›´æ–°
mpm update LuckPerms
```

### æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯

SHA-256ãƒãƒƒã‚·ãƒ¥å€¤ã«ã‚ˆã‚Šã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒæ”¹ã–ã‚“ã•ã‚Œã¦ã„ãªã„ã‹ç¢ºèªã§ãã¾ã™ã€‚

## mpm.json ã¨ã®é–¢ä¿‚

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² | ç·¨é›†æ–¹æ³• |
|---------|------|----------|
| mpm.json | ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä¾å­˜é–¢ä¿‚ã‚’å®£è¨€ | æ‰‹å‹•ç·¨é›† |
| mpm-lock.yaml | å®Ÿéš›ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜éŒ² | è‡ªå‹•ç”Ÿæˆ |

```
mpm.json (version: latest)
    â†“ mpm install
mpm-lock.yaml (version: 5.4.102)
    â†“ mpm update
mpm-lock.yaml (version: 5.4.103)
```

## é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

- [mpm.json](/format/mpm-config) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- [metadata/*.yaml](/format/managed) - å€‹åˆ¥ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è©³ç´°æƒ…å ±
